"use strict";(self.webpackChunkbcrs=self.webpackChunkbcrs||[]).push([[156],{8156:(ze,h,c)=>{c.r(h),c.d(h,{SecurityModule:()=>Qe});var m=c(6814),e=c(9468),v=(c(6825),c(7131)),g=c(3680);let A=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=e.oAB({type:i});static#i=this.\u0275inj=e.cJS({imports:[g.BQ,m.ez,v.Q8,g.BQ]})}return i})();var d=c(95),s=c(3085);let P=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-security"]],decls:1,vars:0,template:function(n,o){1&n&&e._UZ(0,"router-outlet")},dependencies:[s.lC],encapsulation:2})}return i})();var S=c(2181),_=c(7398),Z=c(1631),I=c(6746),O=c(7584);function q(i,r){1&i&&e._UZ(0,"app-nav")}let k=(()=>{class i{constructor(t,n){this.router=t,this.activatedRoute=n,this.showNavbar=!0,this.router.events.pipe((0,S.h)(o=>o instanceof s.m2),(0,_.U)(()=>this.activatedRoute),(0,_.U)(o=>{for(;o.firstChild;)o=o.firstChild;return o}),(0,Z.z)(o=>o.data)).subscribe(o=>this.showNavbar=!o.hideNavbar)}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(s.F0),e.Y36(s.gz))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-auth-layout"]],decls:5,vars:1,consts:[[1,"app-wrapper"],[4,"ngIf"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0),e.YNc(1,q,1,0,"app-nav",1),e.TgZ(2,"main"),e._UZ(3,"router-outlet"),e.qZA(),e._UZ(4,"app-footer"),e.qZA()),2&n&&(e.xp6(1),e.Q6J("ngIf",o.showNavbar))},dependencies:[m.O5,s.lC,I.r,O.c],styles:[".app-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100vh}main[_ngcontent-%COMP%]{flex:1 0 auto}app-footer[_ngcontent-%COMP%]{flex-shrink:0}"]})}return i})();var N=c(459),b=c(9862);let Q=(()=>{class i{constructor(t){this.http=t}signIn(t,n){return this.http.post("/api/security/signin",{email:t,password:n})}static#e=this.\u0275fac=function(n){return new(n||i)(e.LFG(b.eN))};static#t=this.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var E=c(7707);function R(i,r){if(1&i&&(e.TgZ(0,"div",23),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.errorMessage," ")}}function z(i,r){1&i&&(e.TgZ(0,"div",24),e._uU(1," Email address is required. "),e.qZA())}function L(i,r){1&i&&(e.TgZ(0,"div",24),e._uU(1," Enter a valid email address. "),e.qZA())}function U(i,r){1&i&&(e.TgZ(0,"div",24),e._uU(1," Password is required. "),e.qZA())}function Y(i,r){1&i&&(e.TgZ(0,"div",24),e._uU(1," Password must be at least 8 characters, contain one uppercase letter and one number. "),e.qZA())}let D=(()=>{class i{constructor(t,n,o,l,a){this.router=t,this.cookieService=n,this.fb=o,this.signInService=l,this.snackBar=a,this.signInForm=new d.cw({}),this.errorMessage=""}showSnackBar(t,n,o,l="",a=""){this.snackBar.open(`${t}${l}${a}`,n,{duration:o,verticalPosition:"top",panelClass:"app-notification-success"})}ngOnInit(){this.signInForm=this.fb.group({email:["",[d.kI.required,d.kI.email]],password:["",d.kI.compose([d.kI.required,d.kI.pattern("^(?=.*[A-Za-z])(?=.*\\d)(?=.*[A-Z])[A-Za-z\\d]{8,}$")])]})}get form(){return this.signInForm.controls}onSubmit(){this.signInService.signIn(this.signInForm.controls.email.value,this.signInForm.controls.password.value).subscribe({next:o=>{this.showSnackBar("Welcome to BCRS, ","",5e3,o.firstName,"!"),this.cookieService.set("fullName",`${o.firstName} ${o.lastName}`,1),this.cookieService.set("sessionEmail",o.email,1),this.cookieService.set("sessionRole",o.role.text,1),this.cookieService.set("sessionUserId",o._id,1),this.router.navigate(["/service"])},error:o=>{this.errorMessage=o.error.message,console.log(o)}})}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(s.F0),e.Y36(N.N),e.Y36(d.qu),e.Y36(Q),e.Y36(E.ux))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-sign-in"]],decls:38,vars:11,consts:[[1,"background-image"],[1,"text-gray",2,"font-size","60%"],["href","https://www.Unsplash.com/","target","_blank",1,"text-dark"],[1,"login-container"],[1,"login-card"],[1,"icon-container"],[1,"fas","fa-user","fa-3x"],[1,"login-title"],[3,"formGroup","ngSubmit"],["class","alert alert-danger",4,"ngIf"],[1,"form-floating","mb-3"],["type","text","id","email","placeholder","Email Address","formControlName","email",1,"form-control"],["for","email"],["class","invalid-feedback",4,"ngIf"],[1,"forgot"],["routerLink","/security/forgot-password"],["type","password","id","password","placeholder","Password","formControlName","password",1,"form-control"],["for","password"],["type","submit",1,"btn","btn-mod","btn-border","btn-circle","btn-large",3,"disabled"],[1,"sign-up"],["routerLink","/security/register"],[1,"rtnHome"],["routerLink","/"],[1,"alert","alert-danger"],[1,"invalid-feedback"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0)(1,"small",1)(2,"em"),e._uU(3,"Image courtesy of "),e.qZA(),e.TgZ(4,"a",2),e._uU(5,"Unsplash.com "),e.qZA()(),e.TgZ(6,"div",3)(7,"div",4)(8,"div",5),e._UZ(9,"i",6),e.qZA(),e.TgZ(10,"h1",7),e._uU(11,"Sign-In to BCRS"),e.qZA(),e.TgZ(12,"form",8),e.NdJ("ngSubmit",function(){return o.onSubmit(),o.signInForm.reset()}),e.YNc(13,R,2,1,"div",9),e.TgZ(14,"div",10),e._UZ(15,"input",11),e.TgZ(16,"label",12),e._uU(17,"Email Address"),e.qZA(),e.YNc(18,z,2,0,"div",13),e.YNc(19,L,2,0,"div",13),e.qZA(),e.TgZ(20,"div",14)(21,"a",15),e._uU(22,"Forgot Your Password?"),e.qZA()(),e.TgZ(23,"div",10),e._UZ(24,"input",16),e.TgZ(25,"label",17),e._uU(26,"Password"),e.qZA(),e.YNc(27,U,2,0,"div",13),e.YNc(28,Y,2,0,"div",13),e.qZA(),e.TgZ(29,"button",18),e._uU(30," Sign In "),e.qZA(),e.TgZ(31,"div",19),e._uU(32," Don't have an account? "),e.TgZ(33,"a",20),e._uU(34,"Create One"),e.qZA()(),e.TgZ(35,"div",21)(36,"a",22),e._uU(37,"Return to Home"),e.qZA()()()()()()),2&n&&(e.xp6(12),e.Q6J("formGroup",o.signInForm),e.xp6(1),e.Q6J("ngIf",o.errorMessage),e.xp6(2),e.ekj("is-invalid",o.signInForm.controls.email.invalid&&o.signInForm.controls.email.touched),e.xp6(3),e.Q6J("ngIf",o.signInForm.controls.email.hasError("required")&&o.signInForm.controls.email.touched),e.xp6(1),e.Q6J("ngIf",o.signInForm.controls.email.hasError("email")&&o.signInForm.controls.email.touched),e.xp6(5),e.ekj("is-invalid",o.signInForm.controls.password.invalid&&o.signInForm.controls.password.touched),e.xp6(3),e.Q6J("ngIf",o.signInForm.controls.password.hasError("required")&&o.signInForm.controls.password.touched),e.xp6(1),e.Q6J("ngIf",o.signInForm.controls.password.hasError("pattern")&&o.signInForm.controls.password.touched),e.xp6(1),e.Q6J("disabled",!o.signInForm.valid))},dependencies:[m.O5,s.rH,d._Y,d.Fj,d.JJ,d.JL,d.sg,d.u],styles:['.background-image[_ngcontent-%COMP%]{height:100vh;position:relative}.background-image[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;z-index:-1;background-image:url(signin.296ff88f63a67e0d.jpg);background-size:cover;background-repeat:no-repeat;background-position:center center;opacity:.5;height:100%}.login-card[_ngcontent-%COMP%]{width:400px;margin:80px auto 0;padding:20px;border-radius:7px;box-shadow:0 4px 6px #0000001a;background:#ffffff;position:relative}.icon-container[_ngcontent-%COMP%]{width:90px;height:90px;background-color:#2a623d;border-radius:50%;position:absolute;top:-35px;left:50%;transform:translate(-50%);display:flex;align-items:center;justify-content:center}.login-title[_ngcontent-%COMP%]{text-align:center;margin-top:40px;font-size:24px;font-weight:700;padding:20px 0;color:#2a623d}.login-field[_ngcontent-%COMP%]{padding:15px;margin-bottom:5px;border-radius:5px;border:1px solid #ccc;width:100%}.fas.fa-user[_ngcontent-%COMP%]{color:#fff}.login-container[_ngcontent-%COMP%], form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch}a[_ngcontent-%COMP%]{color:#cc9835;text-decoration:none;font-weight:500}a[_ngcontent-%COMP%]:hover{color:#5d5d5d}.btn-mod.btn-large[_ngcontent-%COMP%]{height:auto;padding:13px 52px;font-size:15px}.btn-mod.btn-border[_ngcontent-%COMP%]{color:#fff;border:2px solid #2a623d;background:#2a623d;border-radius:8px}.btn-mod[_ngcontent-%COMP%], a.btn-mod[_ngcontent-%COMP%]{box-sizing:border-box;padding:4px 13px;color:#fff;background:#2a623d;border:2px solid transparent;font-size:11px;font-weight:400;text-transform:uppercase;text-decoration:none;letter-spacing:2px;border-radius:0;box-shadow:none;transition:all .2s cubic-bezier(0,0,.58,1)}.btn-mod.btn-border[_ngcontent-%COMP%]:hover, .btn-mod.btn-border[_ngcontent-%COMP%]:focus{color:#fff;border-color:#1a472a;background:#1a472a}.sign-up[_ngcontent-%COMP%]{text-align:center;padding:20px 0 0;color:#000;font-weight:500}.forgot[_ngcontent-%COMP%]{text-align:right;padding:5px;color:#000;font-weight:500}.rtnHome[_ngcontent-%COMP%]{text-align:center;padding:20px 0 0;color:#000;font-weight:500}']})}return i})(),p=(()=>{class i{constructor(t){this.http=t}signin(t,n){return this.http.post("/api/security/signin",{email:t,password:n})}register(t){return this.http.post("/api/security/register",{email:t.email,password:t.password,firstName:t.firstName,lastName:t.lastName,phoneNumber:t.phoneNumber,address:t.address,selectedSecurityQuestions:t.selectedSecurityQuestions})}verifyUser(t){return this.http.post(`/api/security/verify/users/${t}`,{})}verifySecurityQuestions(t,n){return this.http.post(`/api/security/verify/users/${t}/security-questions`,n)}resetPassword(t,n){return this.http.post(`/api/security/users/${n}/reset-password`,{password:t})}static#e=this.\u0275fac=function(n){return new(n||i)(e.LFG(b.eN))};static#t=this.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function J(i,r){if(1&i&&(e.TgZ(0,"div",8),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.errorMessage," ")}}function j(i,r){if(1&i&&(e.TgZ(0,"div",9),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.successMessage," ")}}function B(i,r){1&i&&(e.TgZ(0,"div",23),e._uU(1," First name is required. "),e.qZA())}function X(i,r){1&i&&(e.TgZ(0,"div",23),e._uU(1," Last name is required. "),e.qZA())}function H(i,r){1&i&&(e.TgZ(0,"div",23),e._uU(1," Phone number is required. "),e.qZA())}function V(i,r){1&i&&(e.TgZ(0,"div",23),e._uU(1," Phone number must be in the following format: xxx-xxx-xxxx "),e.qZA())}function $(i,r){1&i&&(e.TgZ(0,"div",23),e._uU(1," Address is required. "),e.qZA())}function W(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"fieldset")(1,"h2",10),e._uU(2,"Personal Information"),e.qZA(),e.TgZ(3,"h3",11),e._uU(4,"Step 1"),e.qZA(),e.TgZ(5,"div",12),e._UZ(6,"input",13),e.TgZ(7,"label",14),e._uU(8,"First Name"),e.qZA(),e.YNc(9,B,2,0,"div",15),e.qZA(),e.TgZ(10,"div",12),e._UZ(11,"input",16),e.TgZ(12,"label",17),e._uU(13,"Last Name"),e.qZA(),e.YNc(14,X,2,0,"div",15),e.qZA(),e.TgZ(15,"div",12),e._UZ(16,"input",18),e.TgZ(17,"label",19),e._uU(18,"Phone Number (ex. xxx-xxx-xxxx)"),e.qZA(),e.YNc(19,H,2,0,"div",15),e.YNc(20,V,2,0,"div",15),e.qZA(),e.TgZ(21,"div",12)(22,"textarea",20),e._uU(23,"        "),e.qZA(),e.TgZ(24,"label",21),e._uU(25,"Address"),e.qZA(),e.YNc(26,$,2,0,"div",15),e.qZA(),e.TgZ(27,"input",22),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.goToNextStep())}),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(6),e.ekj("is-invalid",t.form.controls.firstName.invalid&&t.form.controls.firstName.touched),e.xp6(3),e.Q6J("ngIf",t.form.controls.firstName.hasError("required")&&t.form.controls.firstName.touched),e.xp6(2),e.ekj("is-invalid",t.form.controls.lastName.invalid&&t.form.controls.lastName.touched),e.xp6(3),e.Q6J("ngIf",t.form.controls.lastName.hasError("required")&&t.form.controls.lastName.touched),e.xp6(2),e.ekj("is-invalid",t.form.controls.phoneNumber.invalid&&t.form.controls.phoneNumber.touched),e.xp6(3),e.Q6J("ngIf",t.form.controls.phoneNumber.hasError("required")&&t.form.controls.phoneNumber.touched),e.xp6(1),e.Q6J("ngIf",t.form.controls.phoneNumber.hasError("pattern")&&t.form.controls.phoneNumber.touched||t.form.controls.phoneNumber.dirty),e.xp6(2),e.ekj("is-invalid",t.form.controls.address.invalid&&t.form.controls.address.touched),e.xp6(4),e.Q6J("ngIf",t.form.controls.address.hasError("required")&&t.form.controls.address.touched)}}function G(i,r){1&i&&(e.TgZ(0,"div",23)(1,"label",25),e._uU(2,"Email"),e.qZA(),e._uU(3," Email address is required. "),e.qZA())}function K(i,r){1&i&&(e.TgZ(0,"div",23),e._uU(1," Enter a valid email address. "),e.qZA())}function ee(i,r){1&i&&(e.TgZ(0,"div",23),e._uU(1," The password is required. "),e.qZA())}function te(i,r){1&i&&(e.TgZ(0,"div",23),e._uU(1," Password must be at least 8 characters, contain one uppercase letter and one number. "),e.qZA())}function ie(i,r){1&i&&(e.TgZ(0,"div",23),e._uU(1," Please confirm your password. "),e.qZA())}function oe(i,r){1&i&&(e.TgZ(0,"div",23),e._uU(1," The passwords must match. "),e.qZA())}function ne(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"fieldset")(1,"h2",10),e._uU(2,"Account Information"),e.qZA(),e.TgZ(3,"h3",11),e._uU(4,"Step 2"),e.qZA(),e.TgZ(5,"div",12),e._UZ(6,"input",24),e.TgZ(7,"label",25),e._uU(8,"Email"),e.qZA(),e.YNc(9,G,4,0,"div",15),e.YNc(10,K,2,0,"div",15),e.qZA(),e.TgZ(11,"div",12),e._UZ(12,"input",26),e.TgZ(13,"label",27),e._uU(14,"Password"),e.qZA(),e.YNc(15,ee,2,0,"div",15),e.YNc(16,te,2,0,"div",15),e.qZA(),e.TgZ(17,"div",12),e._UZ(18,"input",28),e.TgZ(19,"label",29),e._uU(20,"Confirm Password"),e.qZA(),e.YNc(21,ie,2,0,"div",15),e.YNc(22,oe,2,0,"div",15),e.qZA(),e.TgZ(23,"div",30)(24,"input",22),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.goToNextStep())}),e.qZA(),e.TgZ(25,"input",31),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.goToPreviousStep())}),e.qZA()()()}if(2&i){const t=e.oxw();let n;e.xp6(6),e.ekj("is-invalid",t.form.controls.email.invalid&&t.form.controls.email.touched),e.xp6(3),e.Q6J("ngIf",t.form.controls.email.hasError("required")&&t.form.controls.email.touched),e.xp6(1),e.Q6J("ngIf",t.form.controls.email.hasError("email")&&t.form.controls.email.touched),e.xp6(2),e.ekj("is-invalid",t.form.controls.password.invalid&&t.form.controls.password.touched),e.xp6(3),e.Q6J("ngIf",t.form.controls.password.hasError("required")&&t.form.controls.password.touched),e.xp6(1),e.Q6J("ngIf",t.form.controls.password.hasError("pattern")&&t.form.controls.password.touched),e.xp6(2),e.ekj("is-invalid",t.form.controls.confirmPassword.invalid&&t.form.controls.confirmPassword.touched),e.xp6(3),e.Q6J("ngIf",t.form.controls.confirmPassword.hasError("required")&&t.form.controls.confirmPassword.touched),e.xp6(1),e.Q6J("ngIf",(null==(n=t.form.get("confirmPassword"))?null:n.hasError("mismatch"))&&(null==(n=t.form.get("confirmPassword"))?null:n.touched))}}function de(i,r){if(1&i&&(e.TgZ(0,"option"),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.xp6(1),e.hij(" ",t," ")}}function re(i,r){1&i&&(e.TgZ(0,"div",23),e._uU(1," Security question #1 is required. "),e.qZA())}function le(i,r){1&i&&(e.TgZ(0,"div",23),e._uU(1," Answer is required. "),e.qZA())}function ae(i,r){if(1&i&&(e.TgZ(0,"option"),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.xp6(1),e.hij(" ",t," ")}}function ce(i,r){1&i&&(e.TgZ(0,"div",23),e._uU(1," Security question #2 is required. "),e.qZA())}function se(i,r){1&i&&(e.TgZ(0,"div",23),e._uU(1," Answer is required. "),e.qZA())}function fe(i,r){if(1&i&&(e.TgZ(0,"option"),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.xp6(1),e.hij(" ",t," ")}}function me(i,r){1&i&&(e.TgZ(0,"div",23),e._uU(1," Security question #3 is required. "),e.qZA())}function ue(i,r){1&i&&(e.TgZ(0,"div",23),e._uU(1," Answer is required. "),e.qZA())}const x=function(i,r){return[i,r]};function pe(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"fieldset")(1,"h2",10),e._uU(2,"Security Questions"),e.qZA(),e.TgZ(3,"h3",11),e._uU(4,"Step 3"),e.qZA(),e.TgZ(5,"div",32)(6,"select",33)(7,"option",34),e._uU(8,"Select Question 1 *"),e.qZA(),e.YNc(9,de,2,1,"option",35),e.qZA(),e.YNc(10,re,2,0,"div",15),e.qZA(),e.TgZ(11,"div",12),e._UZ(12,"input",36),e.TgZ(13,"label",37),e._uU(14,"Answer"),e.qZA(),e.YNc(15,le,2,0,"div",15),e.qZA(),e.TgZ(16,"div",32)(17,"select",38)(18,"option",34),e._uU(19,"Select Question 2 *"),e.qZA(),e.YNc(20,ae,2,1,"option",35),e.qZA(),e.YNc(21,ce,2,0,"div",15),e.qZA(),e.TgZ(22,"div",12),e._UZ(23,"input",39),e.TgZ(24,"label",40),e._uU(25,"Answer"),e.qZA(),e.YNc(26,se,2,0,"div",15),e.qZA(),e.TgZ(27,"div",32)(28,"select",41)(29,"option",34),e._uU(30,"Select Question 3 *"),e.qZA(),e.YNc(31,fe,2,1,"option",35),e.qZA(),e.YNc(32,me,2,0,"div",15),e.qZA(),e.TgZ(33,"div",12),e._UZ(34,"input",42),e.TgZ(35,"label",43),e._uU(36,"Answer"),e.qZA(),e.YNc(37,ue,2,0,"div",15),e.qZA(),e._UZ(38,"input",44),e.TgZ(39,"input",45),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.goToPreviousStep())}),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(6),e.ekj("is-invalid",t.form.controls.securityQuestion1.invalid&&t.form.controls.securityQuestion1.touched),e.xp6(3),e.Q6J("ngForOf",t.getFilteredQuestions(e.WLB(22,x,t.form.value.securityQuestion2,t.form.value.securityQuestion3))),e.xp6(1),e.Q6J("ngIf",t.form.controls.securityQuestion1.hasError("required")&&t.form.controls.securityQuestion1.touched),e.xp6(2),e.ekj("is-invalid",t.form.controls.securityAnswer1.invalid&&t.form.controls.securityAnswer1.touched),e.xp6(3),e.Q6J("ngIf",t.form.controls.securityAnswer1.hasError("required")&&t.form.controls.securityAnswer1.touched),e.xp6(2),e.ekj("is-invalid",t.form.controls.securityQuestion2.invalid&&t.form.controls.securityQuestion2.touched),e.xp6(3),e.Q6J("ngForOf",t.getFilteredQuestions(e.WLB(25,x,t.form.value.securityQuestion1,t.form.value.securityQuestion3))),e.xp6(1),e.Q6J("ngIf",t.form.controls.securityQuestion2.hasError("required")&&t.form.controls.securityQuestion2.touched),e.xp6(2),e.ekj("is-invalid",t.form.controls.securityAnswer2.invalid&&t.form.controls.securityAnswer2.touched),e.xp6(3),e.Q6J("ngIf",t.form.controls.securityAnswer2.hasError("required")&&t.form.controls.securityAnswer2.touched),e.xp6(2),e.ekj("is-invalid",t.form.controls.securityQuestion3.invalid&&t.form.controls.securityQuestion3.touched),e.xp6(3),e.Q6J("ngForOf",t.getFilteredQuestions(e.WLB(28,x,t.form.value.securityQuestion1,t.form.value.securityQuestion2))),e.xp6(1),e.Q6J("ngIf",t.form.controls.securityQuestion3.hasError("required")&&t.form.controls.securityQuestion3.touched),e.xp6(2),e.ekj("is-invalid",t.form.controls.securityAnswer3.invalid&&t.form.controls.securityAnswer3.touched),e.xp6(3),e.Q6J("ngIf",t.form.controls.securityAnswer3.hasError("required")&&t.form.controls.securityAnswer3.touched),e.xp6(1),e.Q6J("disabled",!t.form.valid)}}function xe(i){const r=i.get("password"),t=i.get("confirmPassword");r&&t&&t.setErrors(r.value!==t.value?{mismatch:!0}:null)}let he=(()=>{class i{constructor(t,n,o){this.fb=t,this.router=n,this.securityService=o,this.currentStep=1,this.totalSteps=3,this.form=this.fb.group({email:[null,d.kI.compose([d.kI.required,d.kI.email])],password:[null,d.kI.compose([d.kI.required,d.kI.pattern("^(?=.*[A-Za-z])(?=.*\\d)(?=.*[A-Z])[A-Za-z\\d]{8,}$")])],confirmPassword:[null,d.kI.compose([d.kI.required])],firstName:[null,d.kI.compose([d.kI.required])],lastName:[null,d.kI.compose([d.kI.required])],phoneNumber:[null,d.kI.compose([d.kI.required,d.kI.pattern("[0-9]{3}-[0-9]{3}-[0-9]{4}")])],address:[null,d.kI.compose([d.kI.required])],securityQuestion1:["",d.kI.compose([d.kI.required])],securityAnswer1:[null,d.kI.compose([d.kI.required])],securityQuestion2:["",d.kI.compose([d.kI.required])],securityAnswer2:[null,d.kI.compose([d.kI.required])],securityQuestion3:["",d.kI.compose([d.kI.required])],securityAnswer3:[null,d.kI.compose([d.kI.required])]},{validators:xe}),this.errorMessage="",this.successMessage="",this.filteredSecurityQuestions1=[],this.filteredSecurityQuestions2=[],this.filteredSecurityQuestions3=[],this.securityQuestions=["What was your first pet's name?","What was the model of your first car?","What was the name of your first school?","What was the first concert you attended?","What was the name of your first boss?","What is the name of your favorite sports team?","What is the name of your favorite movie?","What is the name of your favorite musician?","What is the name of your favorite artist?"],this.user={}}ngOnInit(){this.filteredSecurityQuestions1=[...this.securityQuestions],this.filteredSecurityQuestions2=[...this.securityQuestions],this.filteredSecurityQuestions3=[...this.securityQuestions],this.form.get("securityQuestion1")?.valueChanges.subscribe(t=>{this.updateFilteredQuestions(t,"securityQuestion1")}),this.form.get("securityQuestion2")?.valueChanges.subscribe(t=>{this.updateFilteredQuestions(t,"securityQuestion2")}),this.form.get("securityQuestion3")?.valueChanges.subscribe(t=>{this.updateFilteredQuestions(t,"securityQuestion3")})}updateFilteredQuestions(t,n){let o=[...this.securityQuestions],l=[...this.securityQuestions],a=[...this.securityQuestions];"securityQuestion1"!==n&&this.form.value.securityQuestion1&&(l=l.filter(f=>f!==this.form.value.securityQuestion1),a=a.filter(f=>f!==this.form.value.securityQuestion1)),"securityQuestion2"!==n&&this.form.value.securityQuestion2&&(o=o.filter(f=>f!==this.form.value.securityQuestion2),a=a.filter(f=>f!==this.form.value.securityQuestion2)),"securityQuestion3"!==n&&this.form.value.securityQuestion3&&(o=o.filter(f=>f!==this.form.value.securityQuestion3),l=l.filter(f=>f!==this.form.value.securityQuestion3)),this.filteredSecurityQuestions1=o,this.filteredSecurityQuestions2=l,this.filteredSecurityQuestions3=a}getFilteredQuestions(t){return this.securityQuestions.filter(n=>!t.includes(n))}goToNextStep(){this.currentStep<this.totalSteps&&this.isCurrentStepValid()&&this.currentStep++}goToPreviousStep(){this.currentStep>1&&this.currentStep--}isCurrentStepValid(){switch(this.currentStep){case 1:return this.form.controls.firstName.valid&&this.form.controls.lastName.valid&&this.form.controls.phoneNumber.valid&&this.form.controls.address.valid;case 2:return this.form.controls.email.valid&&this.form.controls.password.valid&&this.form.controls.confirmPassword.valid;case 3:return this.form.controls.securityQuestion1.valid&&this.form.controls.securityQuestion2.valid&&this.form.controls.securityQuestion3.valid;default:return!1}}onSubmit(){const t=this.form.value;this.user={firstName:t.firstName,lastName:t.lastName,phoneNumber:t.phoneNumber,address:t.address,email:t.email,password:t.password,isDisabled:!1,role:{text:"Standard"},selectedSecurityQuestions:[{questionText:t.securityQuestion1,answerText:t.securityAnswer1},{questionText:t.securityQuestion2,answerText:t.securityAnswer2},{questionText:t.securityQuestion3,answerText:t.securityAnswer3}]},this.securityService.register(this.user).subscribe({next:n=>{this.successMessage="Account created successfully. You will now be routed to the sign in page.",setTimeout(()=>{this.router.navigate(["/security/sign-in"])},3e3)},error:n=>{this.errorMessage=n.message,console.log(`Node.js server error: ${n.message}`),console.log(n)}})}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(d.qu),e.Y36(s.F0),e.Y36(p))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-register"]],decls:19,vars:12,consts:[[1,"form-container"],[1,"container"],[1,"text-center"],["class","alert alert-danger",4,"ngIf"],["class","alert alert-success",4,"ngIf"],["id","msform",1,"mb-5",3,"formGroup","ngSubmit","keydown.enter"],["id","progressbar"],[4,"ngIf"],[1,"alert","alert-danger"],[1,"alert","alert-success"],[1,"fs-title"],[1,"fs-subtitle"],[1,"mb-3","form-floating"],["type","text","placeholder","First Name","id","firstName","formControlName","firstName",1,"form-control"],["for","firstName",1,"form-label"],["class","invalid-feedback",4,"ngIf"],["type","text","placeholder","Last Name","id","lastName","formControlName","lastName",1,"form-control"],["for","lastName",1,"form-label"],["type","text","placeholder","Phone Number","id","phoneNumber","formControlName","phoneNumber",1,"form-control"],["for","phoneNumber",1,"form-label"],["id","address","placeholder","Address","formControlName","address",1,"form-control"],["for","address",1,"form-label"],["type","button","value","Next Step >>",1,"btn","btn-mod","btn-border","btn-circle","btn-large",3,"click"],[1,"invalid-feedback"],["type","email","id","email","placeholder","Email","formControlName","email",1,"form-control"],["for","email",1,"form-label"],["type","password","id","password","placeholder","Password","formControlName","password",1,"form-control"],["for","password",1,"form-label"],["type","password","id","confirmPassword","placeholder","Confirm Password","formControlName","confirmPassword",1,"form-control"],["for","confirmPassword",1,"form-label"],[1,"btn-box"],["type","button","value","<< Previous Step",1,"btn","btn-mod","btn-border","btn-circle","btn-large","previousBtn",3,"click"],[1,"mb-3"],["id","securityQuestion1","formControlName","securityQuestion1",1,"form-control","form-select"],["value","","disabled","","selected","","hidden",""],[4,"ngFor","ngForOf"],["type","text","placeholder","Your Answer","formControlName","securityAnswer1",1,"form-control"],["for","securityAnswer1",1,"form-label"],["id","securityQuestion2","formControlName","securityQuestion2",1,"form-control","form-select"],["type","text","placeholder","Your Answer","formControlName","securityAnswer2",1,"form-control"],["for","securityAnswer2",1,"form-label"],["id","securityQuestion3","formControlName","securityQuestion3",1,"form-control","form-select"],["type","text","placeholder","Your Answer","formControlName","securityAnswer3",1,"form-control"],["for","securityAnswer3",1,"form-label"],["type","submit","value","Create Account",1,"btn","btn-mod","btn-border","btn-circle","btn-large",3,"disabled"],["type","button","value","<< Previous Step",1,"btn","btn-mod","btn-circle","btn-large","previousBtn",3,"click"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h3",2),e._uU(3,"Register for an Account"),e.qZA(),e.TgZ(4,"h6",2),e._uU(5,"* All fields are required"),e.qZA(),e.YNc(6,J,2,1,"div",3),e.YNc(7,j,2,1,"div",4),e.qZA(),e.TgZ(8,"form",5),e.NdJ("ngSubmit",function(){return o.onSubmit(),o.form.reset()})("keydown.enter",function(a){return a.preventDefault()}),e.TgZ(9,"ul",6)(10,"li"),e._uU(11,"Personal Information"),e.qZA(),e.TgZ(12,"li"),e._uU(13,"Account Information"),e.qZA(),e.TgZ(14,"li"),e._uU(15,"Security Questions"),e.qZA()(),e.YNc(16,W,28,13,"fieldset",7),e.YNc(17,ne,26,12,"fieldset",7),e.YNc(18,pe,40,31,"fieldset",7),e.qZA()()),2&n&&(e.xp6(6),e.Q6J("ngIf",o.errorMessage),e.xp6(1),e.Q6J("ngIf",o.successMessage),e.xp6(1),e.Q6J("formGroup",o.form),e.xp6(2),e.ekj("active",1===o.currentStep),e.xp6(2),e.ekj("active",2===o.currentStep),e.xp6(2),e.ekj("active",3===o.currentStep),e.xp6(2),e.Q6J("ngIf",1===o.currentStep),e.xp6(1),e.Q6J("ngIf",2===o.currentStep),e.xp6(1),e.Q6J("ngIf",3===o.currentStep))},dependencies:[m.sg,m.O5,d._Y,d.YN,d.Kr,d.Fj,d.EJ,d.JJ,d.JL,d.sg,d.u],styles:['#msform[_ngcontent-%COMP%]{width:700px;margin:50px auto;text-align:center;position:relative}@media screen and (max-width: 600px){#msform[_ngcontent-%COMP%]{width:100%;margin:50px auto;text-align:center;position:relative}}#msform[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%]{background:white;border:0 none;border-radius:3px;box-shadow:0 0 15px 1px #0006;padding:20px 30px;box-sizing:border-box;width:80%;margin:0 10%;position:relative}#msform[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%]:not(:first-of-type){display:none}#msform[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], #msform[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{border:1px solid #ccc;border-radius:3px;margin-bottom:10px;width:100%;box-sizing:border-box;color:#000;font-size:15px}#msform[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]{width:100px;background:#2a623d;font-weight:700;color:#fff;border:0 none;border-radius:1px;cursor:pointer;padding:10px;margin:10px 5px;text-decoration:none;font-size:14px}#msform[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]:hover, #msform[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 2px #fff,0 0 0 3px #2a623d}.fs-title[_ngcontent-%COMP%]{font-size:20px;text-transform:uppercase;color:#000;margin-bottom:10px}.fs-subtitle[_ngcontent-%COMP%]{font-weight:400;font-size:14px;color:#5d5d5d;margin-bottom:20px}#progressbar[_ngcontent-%COMP%]{margin-bottom:30px;overflow:hidden;counter-reset:step}#progressbar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style-type:none;color:#000;text-transform:uppercase;font-size:14px;width:33.33%;float:left;position:relative}#progressbar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{content:counter(step);counter-increment:step;width:20px;line-height:20px;display:block;font-size:10px;color:#333;background:white;border-radius:3px;margin:0 auto 5px}#progressbar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:after{content:"";width:100%;height:2px;background:white;position:absolute;left:-50%;top:9px;z-index:-1;background:#2a623d}#progressbar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child:after{content:none}#progressbar[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]:before, #progressbar[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]:after{background:#2a623d;color:#fff}.previousBtn[_ngcontent-%COMP%]{background:#5d5d5d!important}.previousBtn[_ngcontent-%COMP%]:hover{background:#404040!important}.btn-mod.btn-large[_ngcontent-%COMP%]{height:auto;padding:13px 52px;font-size:15px}.btn-mod.btn-border[_ngcontent-%COMP%]{color:#fff;border:2px solid #2a623d;background:#2a623d;border-radius:8px}.btn-mod[_ngcontent-%COMP%], a.btn-mod[_ngcontent-%COMP%]{box-sizing:border-box;padding:4px 13px;color:#fff!important;background:#2a623d;border:2px solid transparent;font-size:11px;font-weight:400;text-transform:uppercase;text-decoration:none;letter-spacing:2px;border-radius:0;box-shadow:none;transition:all .2s cubic-bezier(0,0,.58,1)}.btn-mod.btn-border[_ngcontent-%COMP%]:hover, .btn-mod.btn-border[_ngcontent-%COMP%]:focus{color:#fff;border-color:#aaa;background:#1a472a}']})}return i})();function ge(i,r){1&i&&(e.TgZ(0,"div",14),e._uU(1," Email address is required. "),e.qZA())}function _e(i,r){1&i&&(e.TgZ(0,"div",14),e._uU(1," Enter a valid email address. "),e.qZA())}function be(i,r){if(1&i&&(e.TgZ(0,"div",15),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.errorMessage," ")}}function ve(i,r){if(1&i&&(e.TgZ(0,"div",16),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.successMessage," ")}}function ye(i,r){if(1&i&&(e.TgZ(0,"fieldset")(1,"h2",5),e._uU(2,"Verify Email Address"),e.qZA(),e.TgZ(3,"h3",6),e._uU(4,"Step 1"),e.qZA(),e.TgZ(5,"div",7),e._UZ(6,"input",8),e.TgZ(7,"label",9),e._uU(8,"Email Address"),e.qZA(),e.YNc(9,ge,2,0,"div",10),e.YNc(10,_e,2,0,"div",10),e.YNc(11,be,2,1,"div",11),e.YNc(12,ve,2,1,"div",12),e.qZA(),e._UZ(13,"input",13),e.qZA()),2&i){const t=e.oxw();e.xp6(6),e.ekj("is-invalid",t.form.controls.email.invalid&&t.form.controls.email.touched),e.xp6(3),e.Q6J("ngIf",t.form.controls.email.hasError("required")&&t.form.controls.email.touched),e.xp6(1),e.Q6J("ngIf",t.form.controls.email.hasError("email")&&t.form.controls.email.touched),e.xp6(1),e.Q6J("ngIf",t.errorMessage),e.xp6(1),e.Q6J("ngIf",t.successMessage),e.xp6(1),e.Q6J("disabled",!t.form.valid)}}let we=(()=>{class i{constructor(t,n,o){this.fb=t,this.router=n,this.securityService=o,this.errorMessage="",this.successMessage="",this.currentStep=1,this.totalSteps=2,this.form=this.fb.group({email:[null,d.kI.compose([d.kI.required,d.kI.email])]}),this.errorMessage=""}verifyUser(){const t=this.form.controls.email.value;this.securityService.verifyUser(t).subscribe({next:n=>{this.router.navigate(["/security/verify-security-questions"],{queryParams:{email:t},skipLocationChange:!0})},error:n=>{404===n.status&&(this.errorMessage="Email cannot be found. Please try again or contact support."),this.errorMessage="Email cannot be found. Please try again or contact support."}})}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(d.qu),e.Y36(s.F0),e.Y36(p))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-verify-email"]],decls:6,vars:2,consts:[[1,"form-container"],[1,"container"],[1,"text-center"],["id","msform",1,"mb-5",3,"formGroup","ngSubmit","keydown.enter"],[4,"ngIf"],[1,"fs-title"],[1,"fs-subtitle"],[1,"mb-3","form-floating"],["type","email","id","email","placeholder","Email Address","formControlName","email",1,"form-control"],["for","email"],["class","invalid-feedback",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["class","alert alert-success",4,"ngIf"],["type","submit","value","Next Step >>",1,"btn","btn-mod","btn-border","btn-circle","btn-large",3,"disabled"],[1,"invalid-feedback"],[1,"alert","alert-danger"],[1,"alert","alert-success"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h3",2),e._uU(3,"Reset Password"),e.qZA()(),e.TgZ(4,"form",3),e.NdJ("ngSubmit",function(){return o.verifyUser()})("keydown.enter",function(a){return a.preventDefault()}),e.YNc(5,ye,14,7,"fieldset",4),e.qZA()()),2&n&&(e.xp6(4),e.Q6J("formGroup",o.form),e.xp6(1),e.Q6J("ngIf",1===o.currentStep))},dependencies:[m.O5,d._Y,d.Fj,d.JJ,d.JL,d.sg,d.u],styles:["#msform[_ngcontent-%COMP%]{width:700px;margin:50px auto;text-align:center;position:relative}@media screen and (max-width: 600px){#msform[_ngcontent-%COMP%]{width:100%;margin:50px auto;text-align:center;position:relative}}#msform[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%]{background:white;border:0 none;border-radius:3px;box-shadow:0 0 15px 1px #0006;padding:20px 30px;box-sizing:border-box;width:80%;margin:0 10%;position:relative}#msform[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%]:not(:first-of-type){display:none}#msform[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], #msform[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{border:1px solid #ccc;border-radius:3px;margin-bottom:10px;width:100%;box-sizing:border-box;color:#000;font-size:15px}#msform[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]{width:100px;background:#2a623d;font-weight:700;color:#fff;border:0 none;border-radius:1px;cursor:pointer;padding:10px;margin:10px 5px;text-decoration:none;font-size:14px}#msform[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]:hover, #msform[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 2px #fff,0 0 0 3px #2a623d}.fs-title[_ngcontent-%COMP%]{font-size:20px;text-transform:uppercase;color:#000;margin-bottom:10px}.fs-subtitle[_ngcontent-%COMP%]{font-weight:400;font-size:14px;color:#5d5d5d;margin-bottom:20px}.btn-mod.btn-large[_ngcontent-%COMP%]{height:auto;padding:13px 52px;font-size:15px}.btn-mod.btn-border[_ngcontent-%COMP%]{color:#fff;border:2px solid #2a623d;background:#2a623d;border-radius:8px}.btn-mod[_ngcontent-%COMP%], a.btn-mod[_ngcontent-%COMP%]{box-sizing:border-box;padding:4px 13px;color:#fff!important;background:#2a623d;border:2px solid transparent;font-size:11px;font-weight:400;text-transform:uppercase;text-decoration:none;letter-spacing:2px;border-radius:0;box-shadow:none;transition:all .2s cubic-bezier(0,0,.58,1)}.btn-mod.btn-border[_ngcontent-%COMP%]:hover, .btn-mod.btn-border[_ngcontent-%COMP%]:focus{color:#fff;border-color:#aaa;background:#1a472a}"]})}return i})();var Me=c(3076);function Fe(i,r){1&i&&(e.TgZ(0,"div",15),e._uU(1," Please answer the security question. "),e.qZA())}function Te(i,r){1&i&&(e.TgZ(0,"div",15),e._uU(1," Please answer the security question. "),e.qZA())}function Ce(i,r){1&i&&(e.TgZ(0,"div",15),e._uU(1," Please answer the security question. "),e.qZA())}function Ae(i,r){if(1&i&&(e.TgZ(0,"div",16),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.errorMessage," ")}}function Pe(i,r){if(1&i&&(e.TgZ(0,"div",17),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.successMessage," ")}}function Ze(i,r){1&i&&(e.TgZ(0,"div",13),e._uU(1," The password is required. "),e.qZA())}function Ie(i,r){1&i&&(e.TgZ(0,"div",13),e._uU(1," Password must be at least 8 characters, contain one uppercase letter and one number. "),e.qZA())}function Oe(i,r){if(1&i&&(e.TgZ(0,"div",14),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.errorMessage," ")}}function qe(i,r){if(1&i&&(e.TgZ(0,"div",15),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.successMessage," ")}}const ke=[{path:"",component:k,children:[{path:"sign-in",component:D,data:{hideNavbar:!0},title:"BCRS: Sign In"},{path:"register",component:he,title:"BCRS: Register"},{path:"forgot-password",component:we,title:"BCRS: Forgot Password"},{path:"verify-security-questions",component:(()=>{class i{constructor(t,n,o,l,a){this.route=t,this.router=n,this.fb=o,this.userService=l,this.securityService=a,this.errorMessage="",this.successMessage="",this.form=this.fb.group({answerText1:[null,d.kI.compose([d.kI.required])],answerText2:[null,d.kI.compose([d.kI.required])],answerText3:[null,d.kI.compose([d.kI.required])]}),this.email=this.route.snapshot.queryParamMap.get("email")??"",this.verifySecurityQuestionsModel={},this.selectedSecurityQuestions=[]}ngOnInit(){this.userService.findSelectedSecurityQuestions(this.email).subscribe({next:t=>{t&&t.selectedSecurityQuestions?(this.selectedSecurityQuestions=t.selectedSecurityQuestions,this.assignQuestionsToModel()):this.errorMessage="No security questions found for user. Please try again later."},error:t=>{this.errorMessage="Error in fetching security questions. Please try again later."}})}assignQuestionsToModel(){this.verifySecurityQuestionsModel.questionText1=this.selectedSecurityQuestions[0]?.questionText||"",this.verifySecurityQuestionsModel.questionText2=this.selectedSecurityQuestions[1]?.questionText||"",this.verifySecurityQuestionsModel.questionText3=this.selectedSecurityQuestions[2]?.questionText||""}verifySecurityQuestions(){this.securityService.verifySecurityQuestions(this.email,{questionText1:this.verifySecurityQuestionsModel.questionText1,answerText1:this.form.controls.answerText1.value,questionText2:this.verifySecurityQuestionsModel.questionText2,answerText2:this.form.controls.answerText2.value,questionText3:this.verifySecurityQuestionsModel.questionText3,answerText3:this.form.controls.answerText3.value}).subscribe({next:n=>{n&&Array.isArray(n.selectedSecurityQuestions)&&n.selectedSecurityQuestions.length>0?this.router.navigate(["/security/reset-password"],{queryParams:{isAuthenticated:"true",email:this.email},skipLocationChange:!0}):this.errorMessage="There was an issue with verifying your answers. Please try again."},error:n=>{this.errorMessage="Error in verifying security questions. Please try again later."}})}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(s.gz),e.Y36(s.F0),e.Y36(d.qu),e.Y36(Me.K),e.Y36(p))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-verify-security-questions"]],decls:28,vars:19,consts:[[1,"form-container"],[1,"container"],[1,"text-center"],["id","msform",1,"mb-5",3,"formGroup","keydown.enter","ngSubmit"],[1,"fs-title"],[1,"fs-subtitle"],[1,"mb-3","form-floating"],["type","text","formControlName","answerText1",1,"form-control",3,"placeholder"],["for","answerText1"],["class","invalid-feedback",4,"ngIf"],["type","text","formControlName","answerText2",1,"form-control",3,"placeholder"],["type","text","formControlName","answerText3",1,"form-control",3,"placeholder"],["class","alert alert-danger",4,"ngIf"],["class","alert alert-success",4,"ngIf"],["type","submit","value","Next Step >>",1,"btn","btn-mod","btn-border","btn-circle","btn-large",3,"disabled"],[1,"invalid-feedback"],[1,"alert","alert-danger"],[1,"alert","alert-success"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h3",2),e._uU(3,"Reset Password"),e.qZA()(),e.TgZ(4,"form",3),e.NdJ("keydown.enter",function(a){return a.preventDefault()})("ngSubmit",function(){return o.verifySecurityQuestions()}),e.TgZ(5,"fieldset")(6,"h2",4),e._uU(7,"Verify Security Questions"),e.qZA(),e.TgZ(8,"h3",5),e._uU(9,"Step 2"),e.qZA(),e.TgZ(10,"div",6),e._UZ(11,"input",7),e.TgZ(12,"label",8),e._uU(13),e.qZA(),e.YNc(14,Fe,2,0,"div",9),e.qZA(),e.TgZ(15,"div",6),e._UZ(16,"input",10),e.TgZ(17,"label",8),e._uU(18),e.qZA(),e.YNc(19,Te,2,0,"div",9),e.qZA(),e.TgZ(20,"div",6),e._UZ(21,"input",11),e.TgZ(22,"label",8),e._uU(23),e.qZA(),e.YNc(24,Ce,2,0,"div",9),e.YNc(25,Ae,2,1,"div",12),e.YNc(26,Pe,2,1,"div",13),e.qZA(),e._UZ(27,"input",14),e.qZA()()()),2&n&&(e.xp6(4),e.Q6J("formGroup",o.form),e.xp6(7),e.ekj("is-invalid",o.form.controls.answerText1.invalid&&o.form.controls.answerText1.touched),e.Q6J("placeholder",o.verifySecurityQuestionsModel.questionText1),e.xp6(2),e.Oqu(o.verifySecurityQuestionsModel.questionText1),e.xp6(1),e.Q6J("ngIf",o.form.controls.answerText1.hasError("required")&&o.form.controls.answerText1.touched),e.xp6(2),e.ekj("is-invalid",o.form.controls.answerText2.invalid&&o.form.controls.answerText2.touched),e.Q6J("placeholder",o.verifySecurityQuestionsModel.questionText2),e.xp6(2),e.Oqu(o.verifySecurityQuestionsModel.questionText2),e.xp6(1),e.Q6J("ngIf",o.form.controls.answerText2.hasError("required")&&o.form.controls.answerText2.touched),e.xp6(2),e.ekj("is-invalid",o.form.controls.answerText3.invalid&&o.form.controls.answerText3.touched),e.Q6J("placeholder",o.verifySecurityQuestionsModel.questionText3),e.xp6(2),e.Oqu(o.verifySecurityQuestionsModel.questionText3),e.xp6(1),e.Q6J("ngIf",o.form.controls.answerText3.hasError("required")&&o.form.controls.answerText3.touched),e.xp6(1),e.Q6J("ngIf",o.errorMessage),e.xp6(1),e.Q6J("ngIf",o.successMessage),e.xp6(1),e.Q6J("disabled",!o.form.valid))},dependencies:[m.O5,d._Y,d.Fj,d.JJ,d.JL,d.sg,d.u],styles:["#msform[_ngcontent-%COMP%]{width:700px;margin:50px auto;text-align:center;position:relative}@media screen and (max-width: 600px){#msform[_ngcontent-%COMP%]{width:100%;margin:50px auto;text-align:center;position:relative}}#msform[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%]{background:white;border:0 none;border-radius:3px;box-shadow:0 0 15px 1px #0006;padding:20px 30px;box-sizing:border-box;width:80%;margin:0 10%;position:relative}#msform[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%]:not(:first-of-type){display:none}#msform[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], #msform[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{border:1px solid #ccc;border-radius:3px;margin-bottom:10px;width:100%;box-sizing:border-box;color:#000;font-size:15px}#msform[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]{width:100px;background:#2a623d;font-weight:700;color:#fff;border:0 none;border-radius:1px;cursor:pointer;padding:10px;margin:10px 5px;text-decoration:none;font-size:14px}#msform[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]:hover, #msform[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 2px #fff,0 0 0 3px #2a623d}.fs-title[_ngcontent-%COMP%]{font-size:20px;text-transform:uppercase;color:#000;margin-bottom:10px}.fs-subtitle[_ngcontent-%COMP%]{font-weight:400;font-size:14px;color:#5d5d5d;margin-bottom:20px}.btn-mod.btn-large[_ngcontent-%COMP%]{height:auto;padding:13px 52px;font-size:15px}.btn-mod.btn-border[_ngcontent-%COMP%]{color:#fff;border:2px solid #2a623d;background:#2a623d;border-radius:8px}.btn-mod[_ngcontent-%COMP%], a.btn-mod[_ngcontent-%COMP%]{box-sizing:border-box;padding:4px 13px;color:#fff!important;background:#2a623d;border:2px solid transparent;font-size:11px;font-weight:400;text-transform:uppercase;text-decoration:none;letter-spacing:2px;border-radius:0;box-shadow:none;transition:all .2s cubic-bezier(0,0,.58,1)}.btn-mod.btn-border[_ngcontent-%COMP%]:hover, .btn-mod.btn-border[_ngcontent-%COMP%]:focus{color:#fff;border-color:#aaa;background:#1a472a}"]})}return i})(),title:"BCRS: Forgot Password"},{path:"reset-password",component:(()=>{class i{constructor(t,n,o,l){this.route=t,this.router=n,this.fb=o,this.securityService=l,this.errorMessage="",this.successMessage="",this.form=this.fb.group({password:[null,d.kI.compose([d.kI.required,d.kI.pattern("^(?=.*[A-Za-z])(?=.*\\d)(?=.*[A-Z])[A-Za-z\\d]{8,}$")])]}),this.isAuthenticated=this.route.snapshot.queryParamMap.get("isAuthenticated")??"",this.email=this.route.snapshot.queryParamMap.get("email")??""}ngOnInit(){}resetPassword(){this.securityService.resetPassword(this.form.controls.password.value,this.email).subscribe({next:n=>{this.successMessage="Password reset successfully. You will now be routed to the sign in page.",setTimeout(()=>{this.router.navigate(["/security/sign-in"])},3e3)},error:n=>{console.log(n),this.errorMessage="Error resetting password. Please try again."}})}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(s.gz),e.Y36(s.F0),e.Y36(d.qu),e.Y36(p))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-reset-password"]],decls:19,vars:8,consts:[[1,"form-container"],[1,"container"],[1,"text-center"],["id","msform",1,"mb-5",3,"formGroup","ngSubmit","keydown.enter"],[1,"fs-title"],[1,"fs-subtitle"],[1,"mb-3","form-floating"],["type","password","id","password","placeholder","New Password","formControlName","password",1,"form-control"],["for","password"],["class","invalid-feedback",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["class","alert alert-success",4,"ngIf"],["type","submit","value","Reset Password",1,"btn","btn-mod","btn-border","btn-circle","btn-large",3,"disabled"],[1,"invalid-feedback"],[1,"alert","alert-danger"],[1,"alert","alert-success"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h3",2),e._uU(3,"Reset Password"),e.qZA()(),e.TgZ(4,"form",3),e.NdJ("ngSubmit",function(){return o.resetPassword()})("keydown.enter",function(a){return a.preventDefault()}),e.TgZ(5,"fieldset")(6,"h2",4),e._uU(7,"New Password"),e.qZA(),e.TgZ(8,"h3",5),e._uU(9,"Step 3"),e.qZA(),e.TgZ(10,"div",6),e._UZ(11,"input",7),e.TgZ(12,"label",8),e._uU(13,"New Password"),e.qZA(),e.YNc(14,Ze,2,0,"div",9),e.YNc(15,Ie,2,0,"div",9),e.YNc(16,Oe,2,1,"div",10),e.YNc(17,qe,2,1,"div",11),e.qZA(),e._UZ(18,"input",12),e.qZA()()()),2&n&&(e.xp6(4),e.Q6J("formGroup",o.form),e.xp6(7),e.ekj("is-invalid",o.form.controls.password.invalid&&o.form.controls.password.touched),e.xp6(3),e.Q6J("ngIf",o.form.controls.password.hasError("required")&&o.form.controls.password.touched),e.xp6(1),e.Q6J("ngIf",o.form.controls.password.hasError("pattern")&&o.form.controls.password.touched),e.xp6(1),e.Q6J("ngIf",o.errorMessage),e.xp6(1),e.Q6J("ngIf",o.successMessage),e.xp6(1),e.Q6J("disabled",!o.form.valid))},dependencies:[m.O5,d._Y,d.Fj,d.JJ,d.JL,d.sg,d.u],styles:["#msform[_ngcontent-%COMP%]{width:700px;margin:50px auto;text-align:center;position:relative}@media screen and (max-width: 600px){#msform[_ngcontent-%COMP%]{width:100%;margin:50px auto;text-align:center;position:relative}}#msform[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%]{background:white;border:0 none;border-radius:3px;box-shadow:0 0 15px 1px #0006;padding:20px 30px;box-sizing:border-box;width:80%;margin:0 10%;position:relative}#msform[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%]:not(:first-of-type){display:none}#msform[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], #msform[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{border:1px solid #ccc;border-radius:3px;margin-bottom:10px;width:100%;box-sizing:border-box;color:#000;font-size:15px}#msform[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]{width:100px;background:#2a623d;font-weight:700;color:#fff;border:0 none;border-radius:1px;cursor:pointer;padding:10px;margin:10px 5px;text-decoration:none;font-size:14px}#msform[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]:hover, #msform[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 2px #fff,0 0 0 3px #2a623d}.fs-title[_ngcontent-%COMP%]{font-size:20px;text-transform:uppercase;color:#000;margin-bottom:10px}.fs-subtitle[_ngcontent-%COMP%]{font-weight:400;font-size:14px;color:#5d5d5d;margin-bottom:20px}.btn-mod.btn-large[_ngcontent-%COMP%]{height:auto;padding:13px 52px;font-size:15px}.btn-mod.btn-border[_ngcontent-%COMP%]{color:#fff;border:2px solid #2a623d;background:#2a623d;border-radius:8px}.btn-mod[_ngcontent-%COMP%], a.btn-mod[_ngcontent-%COMP%]{box-sizing:border-box;padding:4px 13px;color:#fff!important;background:#2a623d;border:2px solid transparent;font-size:11px;font-weight:400;text-transform:uppercase;text-decoration:none;letter-spacing:2px;border-radius:0;box-shadow:none;transition:all .2s cubic-bezier(0,0,.58,1)}.btn-mod.btn-border[_ngcontent-%COMP%]:hover, .btn-mod.btn-border[_ngcontent-%COMP%]:focus{color:#fff;border-color:#aaa;background:#1a472a}"]})}return i})(),title:"BCRS: Forgot Password"}]},{path:"",component:P,children:[]}];let Ne=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=e.oAB({type:i});static#i=this.\u0275inj=e.cJS({imports:[s.Bz.forChild(ke),s.Bz]})}return i})(),Qe=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=e.oAB({type:i});static#i=this.\u0275inj=e.cJS({imports:[m.ez,Ne,A,d.UX]})}return i})()}}]);